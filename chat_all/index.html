<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>チャット | 論文制作ページ</title>

  <!-- CSS を乱数付きで読み込み（キャッシュ回避） -->
  <link id="chat-style" rel="stylesheet" href="">
  <script>
    // CSS のキャッシュ回避（読み込みを早めに設定）
    (function(){
      const vStyle = Math.floor(Math.random() * 1000000);
      const link = document.getElementById("chat-style");
      if (link) link.href = "style.css?v=" + vStyle;
    })();
  </script>
</head>

<body>
  <!-- ヘッダー -->
  <header>
    <h2><a href="../">《</a></h2>
    <h1>チャット</h1>
  </header>

  <!-- チャット表示 -->
  <main id="chat-container" aria-live="polite"></main>

  <!-- 入力エリア -->
  <div class="chat-input-area" role="region" aria-label="メッセージ入力">
    <textarea
      id="chat-input"
      placeholder="メッセージを入力（Ctrl+Enterで送信、Enterで改行）"
      rows="2"
      aria-label="メッセージ入力"></textarea>
    <button id="send-btn" title="送信" aria-label="送信">
      <img src="../imgs/chat/send.png" alt="送信">
    </button>
  </div>

  <!-- main.js を DOM 構築後にモジュールとして読み込む（乱数付き） -->
  <script>
    (function(){
      // 0 以上 999999 未満の乱数を生成して main.js に付与
      const v = Math.floor(Math.random() * 1000000);
      const script = document.createElement("script");
      script.type = "module";
      script.src = "main.js?v=" + v;
      // モジュールは defer 相当なので body 末尾で追加すれば DOM 要素にアクセス可能
      document.body.appendChild(script);
    })();
  </script>
</body>
</html>
