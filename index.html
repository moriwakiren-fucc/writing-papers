<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>論文制作ページ</title>

  <!-- ---------------------------
       重要：最初から完全非表示（チラ見をゼロにする）
       --------------------------- -->
  <style>
    html, body {
      visibility: hidden !important;
      height: 100%;
      margin: 0;
      background: #fff;
    }
    /* 状態ボックスは非表示でも body が hidden の間に作れるようにする */
    #auth-status {
      position: fixed;
      top: 8px;
      right: 8px;
      background: rgba(0,0,0,0.75);
      color: #fff;
      padding: 6px 8px;
      border-radius: 6px;
      z-index: 99999;
      font-size: 12px;
      display: none;
      max-width: 320px;
      word-break: break-word;
    }
  </style>

  <!-- CSS を乱数付きで読み込む（キャッシュ回避） -->
  <link id="chat-style" rel="stylesheet" href="">
  <script>
    const vStyle = Math.floor(Math.random() * 1000000);
    document.getElementById("chat-style").href = `style.css?v=${vStyle}`;
  </script>

  <!-- Firebase compat を直接読み込む（モジュール import トラブル回避） -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>
</head>
<body>
  <div id="auth-status">初期化中…</div>

  <!-- お知らせバナー -->
  <div class="banner">頑張ろう！！</div>

  <!-- ヘッダー -->
  <header>
    <button class="menu-btn" id="menu-btn">&#9776;</button>
    <img src="imgs/commons/icons.png" alt="アイコン" class="header-icon">
    <span class="header-title">論文制作ページ</span>
  </header>

  <!-- サイドメニュー -->
  <nav id="side-menu" class="side-menu">
    <ul>
      <li><a href="./">ホーム</a></li>
      <li><a href="./chat_all/">全体チャット <span class="unread-count" id="unread-count">0</span></a></li>
      <li><a href="./contents">コンテンツ</a></li>
      <li><a href="#" id="logout-btn">ログアウト</a></li>
    </ul>
  </nav>

  <!-- メイン -->
  <main>
    <h1>論文制作ページ</h1>
    <section class="announcements">
      <h2>お知らせ</h2>

      <div class="announcement">
        <h3 class="toggle-btn">お知らせ1 ▼</h3>
        <p class="content">お知らせ1の詳細内容がここに入ります。</p>
        <hr>
      </div>

      <div class="announcement">
        <h3 class="toggle-btn">お知らせ2 ▼</h3>
        <p class="content">お知らせ2の詳細内容がここに入ります。</p>
        <hr>
      </div>

      <div class="announcement">
        <h3 class="toggle-btn">お知らせ3 ▼</h3>
        <p class="content">お知らせ3の詳細内容がここに入ります。</p>
        <hr>
      </div>
    </section>
  </main>

  <!-- main.js を乱数付きで読み込む（キャッシュ回避） -->
  <script>
    const v = Math.floor(Math.random() * 1000000);
    const s = document.createElement("script");
    s.src = `./main.js?v=${v}`;
    s.defer = true; // DOMが生成されてから実行（ただし body は hidden のまま）
    document.body.appendChild(s);
  </script>
</body>
</html>
